<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LTV Loss Calculator – Embed (Green)</title>
  <style>
    :root{
      --brand-bg:#0a0b0f;
      --brand-card:#12131a;
      --brand-text:#f3f4f6;
      --brand-muted:#98a2b3;
      --brand-primary:#ff1f3d;
      --brand-primary-600:#e01832;
      --brand-accent:#22ff8a; /* cash green */
      --brand-accent-outer:rgba(34,255,138,.28);
      --border:#22242f;
    }
    body{margin:0;background:var(--brand-bg);color:var(--brand-text);font:16px/1.5 system-ui,sans-serif;}
    .maxw{max-width:1200px;margin:0 auto;padding:0 1.25rem}
    .section{padding:3.5rem 0}
    .text-center{text-align:center}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.9rem 1.25rem;border-radius:1rem;
      background:var(--brand-primary);color:white;font-weight:600;cursor:pointer;width:100%;border:none}
    .btn:hover{background:var(--brand-primary-600)}
    .calc-wrap{display:grid;gap:3rem;grid-template-columns:1fr}
    @media(min-width:1024px){.calc-wrap{grid-template-columns:1.15fr .85fr}}
    .control{margin-bottom:1.25rem}
    .label{display:block;font-size:.9rem;font-weight:600;margin-bottom:.45rem}
    .row{display:flex;align-items:center;gap:1rem}
    .num{width:6.5rem;background:var(--brand-bg);border:1px solid var(--border);color:var(--brand-text);
      border-radius:.6rem;padding:.55rem .65rem;font-weight:600}
    .range{appearance:none;width:100%;height:0.425rem;background:#1b1d27;border-radius:999px}
    .range::-webkit-slider-thumb{
      appearance:none;width:18px;height:18px;border-radius:50%;
      background:radial-gradient(35% 35% at 50% 50%, #fff 0%, var(--brand-accent) 60%);
      border:2px solid #0b0d12;box-shadow:0 0 0 6px var(--brand-accent-outer),0 0 22px rgba(34,255,138,.25);
      cursor:pointer}
    .range::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--brand-accent);
      border:2px solid #0b0d12;box-shadow:0 0 0 6px var(--brand-accent-outer),0 0 22px rgba(34,255,138,.25);cursor:pointer}
    .result-card{padding:2rem;background:var(--brand-card);border:1px solid var(--border);border-radius:1.25rem}
    .big-number{font-size:2.5rem;font-weight:800;color:var(--brand-primary)}
    .impact{display:grid;gap:.75rem}
    .impact-row{border:1px solid var(--border);border-radius:1rem;padding:1rem 1.25rem;
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,0) 60%)}
    .impact-row .badge{background:var(--brand-accent);color:#0a0b0f;padding:.25rem .6rem;border-radius:999px;
      font-size:.85rem;font-weight:800;text-shadow:0 0 8px rgba(34,255,138,.35);box-shadow:0 0 0 3px var(--brand-accent-outer)}
    .impact-row .value{font-size:1.75rem;font-weight:900;color:var(--brand-accent);text-shadow:0 0 14px rgba(34,255,138,.25)}
  </style>
</head>
<body>
  <main class="section">
    <div class="maxw">
      <div class="text-center" style="margin-bottom:2rem">
        <h2>LTV Loss Calculator</h2>
        <p style="color:var(--brand-muted)">See exactly how much lifetime value you’re losing with poor conversion rates</p>
      </div>

      <div class="calc-wrap">
        <!-- Controls -->
        <div>
          <div class="control"><label class="label">Monthly Site Sessions</label>
            <div class="row"><input id="sessionsRange" class="range" type="range" min="10000" max="200000" step="5000" value="50000" />
              <input id="sessionsNum" class="num" type="number" value="50000" /></div></div>

          <div class="control"><label class="label">Current Sign-up Rate (%)</label>
            <div class="row"><input id="currentRange" class="range" type="range" min="0.5" max="10" step="0.1" value="2.0" />
              <input id="currentNum" class="num" type="number" step="0.1" value="2.0" /></div></div>

          <div class="control"><label class="label">Target Sign-up Rate (%)</label>
            <div class="row"><input id="targetRange" class="range" type="range" min="1" max="15" step="0.1" value="3.5" />
              <input id="targetNum" class="num" type="number" step="0.1" value="3.5" /></div></div>

          <div class="control"><label class="label">First Deposit Rate (%)</label>
            <div class="row"><input id="ftdRange" class="range" type="range" min="10" max="80" step="1" value="35" />
              <input id="ftdNum" class="num" type="number" step="1" value="35" /></div></div>

          <div class="control"><label class="label">Average LTV per Funded Trader (USD)</label>
            <div class="row"><input id="ltvRange" class="range" type="range" min="200" max="2000" step="50" value="600" />
              <input id="ltvNum" class="num" type="number" step="50" value="600" /></div></div>

          <div class="control"><label class="label">Time Horizon (Months)</label>
            <div class="row"><input id="monthsRange" class="range" type="range" min="3" max="24" step="1" value="12" />
              <input id="monthsNum" class="num" type="number" step="1" value="12" /></div></div>
        </div>

        <!-- Results -->
        <div class="result-card">
          <h3 class="text-center">Lost LTV Opportunity</h3>
          <div class="text-center" style="margin:1rem 0 2rem">
            <div id="lostLtv" class="big-number">$0</div>
            <div id="monthsLabel" style="color:var(--brand-muted)">Over 12 months</div>
          </div>

          <div class="impact" style="margin-bottom:1.25rem">
            <div class="impact-row"><span class="badge">+1pp</span><span id="pp1" class="value">$0</span></div>
            <div class="impact-row"><span class="badge">+2pp</span><span id="pp2" class="value">$0</span></div>
            <div class="impact-row"><span class="badge">+3pp</span><span id="pp3" class="value">$0</span></div>
          </div>

          <button id="cta" class="btn">Apply Now to Unlock This Upside</button>
        </div>
      </div>
    </div>
  </main>

<script>
  /* ===== UTM persistence (90 days) ===== */
  const KEYS=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];
  const STORE="convertico_utms"; const TTL=90*24*60*60*1000;
  function parseUTMs(qs){let p=new URLSearchParams(qs||"");let o={};KEYS.forEach(k=>o[k]=p.get(k)||"");return o}
  function hasAny(o){return KEYS.some(k=>o[k])}
  function save(o){localStorage.setItem(STORE,JSON.stringify({...o,_ts:Date.now()}))}
  function load(){try{let r=JSON.parse(localStorage.getItem(STORE)||"{}");if(!r._ts)return {};if(Date.now()-r._ts>TTL){localStorage.removeItem(STORE);return{}};let o={};KEYS.forEach(k=>o[k]=r[k]||"");return o}catch(e){return{}}}
  const now=parseUTMs(location.search), old=load(), utms={}; KEYS.forEach(k=>utms[k]=now[k]||old[k]||"");
  if(hasAny(now)) save(utms);
  function appendUTMs(url){let u=new URL(url);KEYS.forEach(k=>{if(utms[k])u.searchParams.set(k,utms[k])});return u.toString()}

  /* ===== Calculator logic ===== */
  const els={sessionsRange:sessionsRange,sessionsNum:sessionsNum,currentRange:currentRange,currentNum:currentNum,
    targetRange:targetRange,targetNum:targetNum,ftdRange:ftdRange,ftdNum:ftdNum,ltvRange:ltvRange,ltvNum:ltvNum,
    monthsRange:monthsRange,monthsNum:monthsNum,lostLtv:lostLtv,monthsLabel:monthsLabel,pp1:pp1,pp2:pp2,pp3:pp3,cta:cta};
  const st={sessions:50000,currentRate:2,targetRate:3.5,ftdRate:35,ltv:600,months:12,lastLost:0};
  function bind(r,n,key,parse){function commit(v){st[key]=v;r.value=v;n.value=v;update()}r.oninput=e=>commit(parse(e.target.value));n.oninput=e=>commit(parse(e.target.value))}
  function toInt(v){return Math.max(0,parseInt(v||0)||0)}function toF(v){return Math.max(0,parseFloat(v||0)||0)}
  function fmt(n){return "$"+(n||0).toLocaleString()}
  function lost(){return Math.max(0,Math.round(st.sessions*((st.targetRate-st.currentRate)/100)*(st.ftdRate/100)*st.ltv*(st.months/12)))}
  function delta(pp){return Math.round(st.sessions*((pp)/100)*(st.ftdRate/100)*st.ltv*(st.months/12))}
  function update(){let l=lost();els.lostLtv.textContent=fmt(l);st.lastLost=l;els.monthsLabel.textContent="Over "+st.months+" months";
    els.pp1.textContent=fmt(delta(1));els.pp2.textContent=fmt(delta(2));els.pp3.textContent=fmt(delta(3))}
  bind(els.sessionsRange,els.sessionsNum,"sessions",toInt);
  bind(els.currentRange,els.currentNum,"currentRate",toF);
  bind(els.targetRange,els.targetNum,"targetRate",toF);
  bind(els.ftdRange,els.ftdNum,"ftdRate",toInt);
  bind(els.ltvRange,els.ltvNum,"ltv",toInt);
  bind(els.monthsRange,els.monthsNum,"months",toInt);
  els.cta.onclick=()=>{window.open(appendUTMs("https://growth.convertico.co.za"),"_blank")};
  update();
</script>
</body>
</html>
